@page "/users"



<PageTitle>Manage User</PageTitle>

<MudText Typo="Typo.h3" GutterBottom="true">Manage User</MudText>
<MudText Typo="Typo.body1" Class="mb-8">..............</MudText>

<NavLink href="/Add_User"><MudButton Variant="Variant.Filled" DropShadow="false" Color="Color.Primary">Add User</MudButton></NavLink>

@if (users == null)
{
    <MudProgressCircular Color="Color.Default" Indeterminate="true" />
}
else
{
    <MudTable Items="users" Hover="true" SortLabel="Sort By" Elevation="0" AllowUnsorted="false">
        <HeaderContent>
            <MudTh></MudTh>
            <MudTh><MudTableSortLabel InitialDirection="SortDirection.Ascending" SortBy="new Func<UserManagement, object>(x => x.User_ID)">User ID</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel SortBy="new Func<UserManagement, object>(x => x.Name)">Name</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel SortBy="new Func<UserManagement, object>(x => x.Role)">Role</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel SortBy="new Func<UserManagement, object>(x => x.Email!)">Email</MudTableSortLabel></MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="Enabled"><MudCheckBox T="bool" Checked="@context.selected" ValueChanged="@(e => UpdateRecord(context, e))"></MudCheckBox></MudTd>
            <MudTd DataLabel="User_ID"><MudLink Href="#">@context.User_ID</MudLink></MudTd>
            <MudTd DataLabel="Name">@context.Name</MudTd>
            <MudTd DataLabel="Role">@context.Role</MudTd>
            <MudTd DataLabel="Email">@context.Email</MudTd>
        </RowTemplate>
        <PagerContent>
            <MudTablePager PageSizeOptions="new int[] { 50, 100 }" />
        </PagerContent>
    </MudTable>

}

@code {



    public bool Basic_CheckBox1 { get; set; } = true;
    private UserManagement[]? users;

    protected override async Task OnInitializedAsync()
    {
        // Simulate asynchronous loading to demonstrate a loading indicator
        //await Task.Delay(500);

        //values from database
        users = new UserManagement[2];
        users[0] = new UserManagement();
        users[0].User_ID = "IS001";
        users[0].Name = "Konatsu Macala";
        users[0].Role = "User";
        users[0].Email = "is241305@ustp-students.at";


        users[1] = new UserManagement();
        users[1].User_ID = "IS002";
        users[1].Name = "Philipp Muehlparzer ";
        users[1].Role = "Admin";
        users[1].Email = "....";

       
    }

    private async Task UpdateRecord(UserManagement record, bool ischecked)
    {
        record.selected = ischecked;

    }



    private class UserManagement
    {
        public string User_ID { get; set; }
        public string Name { get; set; }
        public string Role { get; set; }
        public string Email { get; set; }
        public bool selected { get; set; }
    }
}
