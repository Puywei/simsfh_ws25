
@page "/Add_Customer"
@using RestSharp;
@using System.Text.Json;
@using sims_web_app.Data.Model
@using sims_web_app.Data.Model.Enum
@using sims_web_app.Services

<PageTitle>Add Customer</PageTitle>

<MudForm @ref="form" OnValidSubmit="SubmitCustomer">
    <MudText Typo="Typo.h3" GutterBottom="true">Add New Customer</MudText>
    <MudText Typo="Typo.body1" Class="mb-8">You can add a new customer here.</MudText>

    <MudTextField @bind-Value="newCustomer.CompanyName" Label="Company Name" Variant="Variant.Outlined"></MudTextField>
    <MudTextField @bind-Value="newCustomer.Email" Label="Email Address" Variant="Variant.Outlined"></MudTextField>
    <MudTextField @bind-Value="newCustomer.PhoneNumber" Label="Phone Number" Variant="Variant.Outlined"></MudTextField>
    <MudTextField @bind-Value="newCustomer.Address" Label="Address" Variant="Variant.Outlined"></MudTextField>
    <MudTextField @bind-Value="newCustomer.City" Label="City" Variant="Variant.Outlined"></MudTextField>
    <MudTextField @bind-Value="newCustomer.State" Label="State" Variant="Variant.Outlined"></MudTextField>
    <MudTextField @bind-Value="newCustomer.ZipCode" Label="Zip Code" Variant="Variant.Outlined"></MudTextField>
    <MudTextField @bind-Value="newCustomer.Country" Label="Country" Variant="Variant.Outlined"></MudTextField>

    <MudButton Variant="Variant.Filled" ButtonType="ButtonType.Submit" OnClick="(() => SubmitCustomer())" StartIcon="@Icons.Material.Filled.Save" Color="Color.Info" Size="Size.Medium">Save</MudButton>
</MudForm>

@code {
    public string CompanyName { get; set; }
    public string Email { get; set; }
    public string PhoneNumber { get; set; }
    public string Address { get; set; }
    public string City { get; set; }
    public string State { get; set; }
    public string ZipCode { get; set; }
    public string Country { get; set; }

    private MudForm form;
    private Data.Model.Customer newCustomer = new Data.Model.Customer();

    private async Task SubmitCustomer()
    {
        await BackendApiHandler.CreateCustomer(newCustomer);
    }
}
