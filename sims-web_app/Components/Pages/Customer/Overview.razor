@page "/Customer/Overview"
@using sims_web_app.Data.Model
@using sims_web_app.Services

<PageTitle>Manage Customer</PageTitle>

<MudText Typo="Typo.h3" GutterBottom="true">Manage Customer</MudText>
<MudText Typo="Typo.body1" Class="mb-8">..............</MudText>

<NavLink href="/Customer/Create"><MudButton Variant="Variant.Filled" DropShadow="false" Color="Color.Primary">Create Customer</MudButton></NavLink>

@if (_customers == null)
{
    <MudProgressCircular Color="Color.Default" Indeterminate="true" />
}
else
{
    <MudTable Items="_customers" Hover="true" SortLabel="Sort By" Elevation="0" AllowUnsorted="false">
        <HeaderContent>
            <MudTh></MudTh>
            <MudTh><MudTableSortLabel InitialDirection="SortDirection.Ascending" SortBy="new Func<CustomerOverview, object>(x => x.Id)">Customer ID</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel SortBy="new Func<CustomerOverview, object>(x => x.CompanyName)">Company Name</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel SortBy="new Func<CustomerOverview, object>(x => x.Email)">Email</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel SortBy="new Func<CustomerOverview, object>(x => x.PhoneNumber!)">Phone Number</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel SortBy="new Func<CustomerOverview, object>(x => x.Address)">Address</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel SortBy="new Func<CustomerOverview, object>(x => x.City)">City</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel SortBy="new Func<CustomerOverview, object>(x => x.State)">State</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel SortBy="new Func<CustomerOverview, object>(x => x.ZipCode)">Zip Code</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel SortBy="new Func<CustomerOverview, object>(x => x.Country)">Country</MudTableSortLabel></MudTh>
        </HeaderContent>
        <RowTemplate>
        @*    <MudTd DataLabel="Enabled"><MudCheckBox T="bool" Checked="@context.selected" ValueChanged="@(e => UpdateRecord(context, e))"></MudCheckBox></MudTd> *@
        <MudTd DataLabel="Id">
            <MudLink Href="@($"/customer/{context.Id}")">@context.Id</MudLink>
        </MudTd>
            <MudTd DataLabel="CompanyName">@context.CompanyName</MudTd>
            <MudTd DataLabel="Email">@context.Email</MudTd>
            <MudTd DataLabel="PhoneNumber">@context.PhoneNumber</MudTd>
            <MudTd DataLabel="Address">@context.Address</MudTd>
            <MudTd DataLabel="City">@context.City</MudTd>
            <MudTd DataLabel="State">@context.State</MudTd>
            <MudTd DataLabel="ZipCode">@context.ZipCode</MudTd>
            <MudTd DataLabel="Country">@context.Country</MudTd>
        </RowTemplate>
        <PagerContent>
            <MudTablePager PageSizeOptions="new int[] { 50, 100 }" />
        </PagerContent>
    </MudTable>

}

@code {
    public bool Basic_CheckBox1 { get; set; } = true;
    private List<Data.Model.Customer> _customers = new List<Data.Model.Customer>();

    protected override async Task OnInitializedAsync()
    {
        _customers = await BackendApiHandler.GetAllCustomer();
    }
    
}
